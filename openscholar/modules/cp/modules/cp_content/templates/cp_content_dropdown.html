<div class="multiselect-parent btn-group dropdown-multiselect">
  <div ng-if="displayType == 'term'">
    <span class="dropdown-toggle" ng-class="settings.buttonClasses" ng-click="toggleDropdown()">{{displayText}}</span>
    </div>
  <div ng-if="displayType == 'filter'">
    <button type="button" class="dropdown-toggle" ng-class="settings.buttonClasses" ng-click="toggleDropdown()">{{getButtonText()}}&nbsp;<span class="caret"></span></button>
  </div>
  <div class="dropdown-menu dropdown-menu-form" ng-style="{display: open ? 'block' : 'none', height : settings.scrollable ? settings.scrollableHeight : 'auto' }" style="overflow: scroll">
   <div ng-if="displayType == 'term'">
      <button type="button" ng-click="closeTermDropdown()">Close</button>
    </div>
    <div ng-hide="!settings.showCheckAll || settings.selectionLimit > 0"><a data-ng-click="selectAll()"><span class="glyphicon glyphicon-ok"></span>  {{texts.checkAll}}</a></div>
      <div ng-show="settings.showUncheckAll"><a data-ng-click="deselectAll();"><span class="glyphicon glyphicon-remove"></span>   {{texts.uncheckAll}}</a></div>
      <div ng-hide="(!settings.showCheckAll || settings.selectionLimit > 0) && !settings.showUncheckAll" class="divider"></div>

      <div ng-if="groups" ng-repeat-start="option in orderedItems | filter: searchFilter" ng-show="getPropertyForObject(option, settings.groupBy) !== getPropertyForObject(orderedItems[$index - 1], settings.groupBy)" role="presentation" class="dropdown-header group-dropdown-toggle glyphicon glyphicon-triangle-right" ng-class="{'glyphicon-triangle-bottom' : {{orderedItems[$index]['vocab']}}}" ng-click="groupToggleDropdown(orderedItems, $index)">{{ getGroupTitle(getPropertyForObject(option, settings.groupBy)) }}
        <div ng-if="displayType == 'term'" ng-show="{{orderedItems[$index]['vocab']}}" ng-click="stopBubbling($event)"><input type="text" ng-model="termName">&nbsp;<button type="button" >Add term</button></div>
      </div>
      <div ng-if="groups" ng-repeat-end role="presentation" ng-show="{{orderedItems[$index]['vocab']}}">
        <a role="menuitem" tabindex="-1" ng-click="setSelectedItem(getPropertyForObject(option,settings.idProp))">
          <div ng-if="checkboxes" class="checkbox ng-show"><label><input class="checkboxInput" type="checkbox" ng-click="checkboxClick($event, getPropertyForObject(option,settings.idProp))" ng-checked="isChecked(getPropertyForObject(option,settings.idProp))" /> {{getPropertyForObject(option, settings.displayProp)}}</label></div>
        </a>
      </div>

      <div ng-show="groups == false" role="presentation" ng-repeat="option in options | filter: searchFilter">
        <a role="menuitem" tabindex="-1" ng-click="setSelectedItem(getPropertyForObject(option,settings.idProp))">
          <div ng-if="checkboxes" class="checkbox ng-show"><label><input class="checkboxInput" type="checkbox" ng-click="checkboxClick($event, getPropertyForObject(option,settings.idProp))" ng-checked="isChecked(getPropertyForObject(option,settings.idProp))"> {{getPropertyForObject(option, settings.displayProp)}}</label></div>
        </a>
      </div>
      <div ng-if="displayType == 'term'">
        <button type="button" ng-click="applyTerm()">Apply</button>
      </div>
      <div class="divider" ng-show="settings.selectionLimit > 1"></div>
      <div role="presentation" ng-show="settings.selectionLimit > 1"><a role="menuitem">{{selectedModel.length}} {{texts.selectionOf}} {{settings.selectionLimit}} {{texts.selectionCount}}</a></div>
  </div>
</div>
